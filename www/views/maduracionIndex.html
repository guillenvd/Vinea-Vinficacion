<div id="index">
    <div class="fixed-action-btn">
      <a class="btn-floating btn-large indigo darken-2" onclick="altaMaduracion();">
      <i class="fa fa-plus"></i>
      </a>
    </div>
    <center>
      <h1>Maduración</h1>
    </center>
    <table class="responsive-table striped">
      <thead>
        <tr>
          <th data-field="name">Fecha</th>
          <th data-field="sublote">Sublote</th>
          <th data-field="bloque">Bloque</th>
          <th data-field="anada">Anada</th>
          <th data-field="ver">Acción</th>
        </tr>
      </thead>
      <tbody id="bodyMaduracion">
      </tbody>
    </table>
</div>
<div id="alta">
  <center>
    <div class="row">
      <div class="col s12">
        <ul class="tabs">
          <li class="tab col s6 waves-effect waves-light"><a href="#confi">Configuración</a></li>
          <li class="tab col s6 waves-effect waves-light"><a class="active" href="#regi">Registro</a></li>
        </ul>
      </div>
      <div id="confi" class="col s12">
            <h4>Configuración</h4>
            <div class="input-field col s12">
                  <label>Rancho:</label><br><br>
                  <select class="browser-default" id="rancho" onchange="rowLote();">
                    <option value="" selected>Seleccione Rancho</option>
                  </select>
            </div>
            <div class="input-field col s12">
                  <label>Viñedo:</label><br><br>
                  <select class="browser-default"  id="vinedo" onchange="rowSublote();">
                    <option value="" selected>Seleccione Viñedo</option>
                  </select>
            </div>
            <div class="input-field col s12">
                  <label>Variedad:</label><br><br>
                  <select class="browser-default" id="variedad" onchange="rowBloque();">
                    <option value="" selected>Seleccione Variedad</option>
                  </select>
            </div>
            <div class="input-field col s12">
                  <label>Bloque:</label><br><br>
                  <select class="browser-default" id="bloque">
                    <option value="" selected>Seleccione Bloque</option>
                  </select>
            </div>

            <div class="input-field col s12">
                  <label>Añada:</label><br/><br/>
                  <select class="browser-default" id="anada">
                      <option value="" selected>Seleccione Añada</option>
                  </select><br/>  
                  <a class="waves-effect waves-light btn" onclick="saveConfig();">Guardar</a>
            </div>
      </div>
      <div id="regi" class="col s12">
              <h4>Nuevo Registro</h4>
              <div class="input-field col s12">
                    <label for="fecha">Fecha registro</label>
                    <input id="fecha" type="text" class="datepicker">
              </div>
              <div class="input-field col s12">
                  <input id="solidos" type="text" >
                  <label for="solidos">Sólidos solubles</label>
              </div>

              <div class="input-field col s12">
                  <input id="ph" type="text">
                  <label for="ph">pH</label>
              </div>
              
              <div class="input-field col s12">
                  <input id="at" type="text" >
                  <label for="at">AT</label>
              </div>

              <div class="input-field col s12">
                  <label for="brph">Br * pH </label>
              </div>

              <div class="input-field col s12">
                  <input id="brph" type="text" class="browser-default"  disabled="true"  class="validate">
              </div>

              <div class="input-field col s12">
                  <label for="brat">Br / AT</label>
              </div>
              <div class="input-field col s12">
                  <input id="brat" type="text" class="browser-default"  disabled="true" class="validate">
              </div>        
          <br> <a class="waves-effect waves-light btn" onclick="saveMaduracion();">Guardar</a>

      </div>
    </div>
  </center>
</div>

<script>
    $(document).ready(function(){ 
      $('.datepicker').pickadate({
          selectMonths: true, 
          selectYears: 15
        });
      $('#alta').hide(); 

      $( "#solidos" ).keyup(function() {
        console.log($( "#ph" ).val());

        if( !isNaN($(this).val()) ){
          brph();
          brat();
        }
      });  
      
      $( "#ph" ).keyup(function() {
        console.log($( "#ph" ).val());
        if( !isNaN($(this).val()) ){
          brph();
        }
      }); 

      $( "#at" ).keyup(function() {
        if( !isNaN($(this).val()) ){
          brat();
        }
      }); 

    });

    function brph() {
      if( (!isNaN($('#solidos').val()) && !isNaN($("#ph").val()) ) && ($('#solidos').val() != '' &&  $("#ph").val() !='')){
        var brph = parseFloat($('#solidos').val()) * Math.pow($("#ph").val(), 2);
        $('#brph').val(brph);
      }
    }

    function brat() {
      if( (!isNaN($('#solidos').val()) && !isNaN($("#at").val()) ) && ($('#solidos').val() != '' &&  $("#at").val() !='')){
        var brat = (parseFloat($('#solidos').val()) / $("#at").val())*10;
        $('#brat').val(brat);
      }
    }

</script>